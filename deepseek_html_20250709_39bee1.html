<!DOCTYPE html>
<html lang="zu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I-ChatGPT Clone</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #10a37f;
            --primary-dark: #0d8a6a;
            --sidebar-bg: #202123;
            --chat-bg: #343541;
            --message-user-bg: #444654;
            --message-ai-bg: #40414f;
            --text-color: #d1d5db;
            --text-light: #ececf1;
            --border-color: #4d4d4f;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            display: flex;
            height: 100vh;
            background-color: var(--chat-bg);
            color: var(--text-color);
            overflow: hidden;
        }

        /* Izitayela ze-Sidebar */
        .sidebar {
            width: 260px;
            background-color: var(--sidebar-bg);
            display: flex;
            flex-direction: column;
            height: 100%;
            transition: transform 0.3s ease;
            z-index: 10;
        }

        .sidebar-header {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .new-chat-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: transparent;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.2s;
        }

        .new-chat-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .new-chat-btn i {
            font-size: 16px;
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }

        .chat-item {
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .sidebar-footer {
            padding: 12px;
            border-top: 1px solid var(--border-color);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
        }

        .user-profile:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .user-avatar {
            width: 28px;
            height: 28px;
            border-radius: 2px;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        /* Indawo enkulu yengxoxo */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
        }

        .chat-header {
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .menu-btn {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 18px;
            display: none;
        }

        .chat-title {
            font-size: 16px;
            font-weight: 600;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px 0;
        }

        .message {
            padding: 20px 0;
            position: relative;
        }

        .message-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            gap: 24px;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .user-message .message-avatar {
            background-color: #19c37d;
        }

        .ai-message .message-avatar {
            background-color: #5436da;
        }

        .message-text {
            flex: 1;
            line-height: 1.5;
            padding-top: 4px;
        }

        .user-message {
            background-color: var(--message-user-bg);
        }

        .ai-message {
            background-color: var(--message-ai-bg);
        }

        /* Indawo yokufaka */
        .input-container {
            padding: 24px;
            position: relative;
        }

        .input-box {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .chat-input {
            width: 100%;
            padding: 12px 48px 12px 16px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            background-color: rgba(64, 65, 79, 0.8);
            color: var(--text-color);
            font-size: 16px;
            resize: none;
            min-height: 52px;
            max-height: 200px;
            outline: none;
        }

        .chat-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(16, 163, 127, 0.2);
        }

        .send-btn {
            position: absolute;
            right: 12px;
            bottom: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .send-btn:hover {
            background-color: var(--primary-dark);
        }

        .send-btn:disabled {
            background-color: #6e6e80;
            cursor: not-allowed;
        }

        /* Inkomba yokuthayipha */
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            background-color: var(--message-ai-bg);
            border-radius: 6px;
            margin-top: 8px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--text-color);
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-5px);
            }
        }

        /* Ukusebenza kwamaselula */
        @media (max-width: 768px) {
            .sidebar {
                position: absolute;
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .menu-btn {
                display: block;
            }
        }

        /* Ukuhlela kwe-scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #666;
        }
    </style>
</head>
<body>
    <!-- I-Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <button class="new-chat-btn" id="newChatBtn">
                <i class="fas fa-plus"></i>
                <span>Ingxoxo entsha</span>
            </button>
        </div>
        <div class="chat-history" id="chatHistory">
            <!-- Izinto zomlando wengxoxo zizofakwa lapha ngokushintshashintsha -->
        </div>
        <div class="sidebar-footer">
            <div class="user-profile">
                <div class="user-avatar">U</div>
                <span>Umsebenzisi</span>
            </div>
        </div>
    </div>

    <!-- Indawo enkulu yengxoxo -->
    <div class="chat-container">
        <div class="chat-header">
            <button class="menu-btn" id="menuBtn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="chat-title" id="chatTitle">Ingxoxo entsha</div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <!-- Imilayezo izofakwa lapha ngokushintshashintsha -->
        </div>

        <div class="input-container">
            <div class="input-box">
                <textarea class="chat-input" id="chatInput" placeholder="Thumela umlayezo ku-ChatGPT..." rows="1"></textarea>
                <button class="send-btn" id="sendBtn" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Izakhi ze-DOM
            const sidebar = document.getElementById('sidebar');
            const menuBtn = document.getElementById('menuBtn');
            const newChatBtn = document.getElementById('newChatBtn');
            const chatHistory = document.getElementById('chatHistory');
            const chatMessages = document.getElementById('chatMessages');
            const chatInput = document.getElementById('chatInput');
            const sendBtn = document.getElementById('sendBtn');
            const chatTitle = document.getElementById('chatTitle');

            // Isimo
            let currentChatId = null;
            let chats = JSON.parse(localStorage.getItem('chats')) || [];
            let isWaitingForResponse = false;

            // Qalisa uhlelo
            function init() {
                renderChatHistory();
                if (chats.length > 0) {
                    loadChat(chats[0].id);
                } else {
                    createNewChat();
                }

                // Setha ukuzilungisa okuzenzakalelayo kwe-textarea
                chatInput.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = (this.scrollHeight) + 'px';
                    
                    // Nika amandla/nqamula inkinobho yokuthumela ngokusekelwe kokufakiwe
                    sendBtn.disabled = this.value.trim() === '';
                });

                // Thumela umlayezo nge-Enter (kodwa vumela i-Shift+Enter yemigqa emisha)
                chatInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        if (!sendBtn.disabled && !isWaitingForResponse) {
                            sendMessage();
                        }
                    }
                });

                // Isiphathi sokuchofoza inkinobho yokuthumela
                sendBtn.addEventListener('click', function() {
                    if (!sendBtn.disabled && !isWaitingForResponse) {
                        sendMessage();
                    }
                });

                // Isiphathi sokuchofoza inkinobho yengxoxo entsha
                newChatBtn.addEventListener('click', createNewChat);

                // Isiphathi sokuchofoza inkinobho yemenyu (iselula)
                menuBtn.addEventListener('click', function() {
                    sidebar.classList.toggle('open');
                });
            }

            // Dala ingxoxo entsha
            function createNewChat() {
                const newChat = {
                    id: Date.now().toString(),
                    title: 'Ingxoxo entsha',
                    messages: [],
                    createdAt: new Date().toISOString()
                };

                chats.unshift(newChat);
                saveChats();
                loadChat(newChat.id);
                renderChatHistory();
                
                // Vala i-sidebar kuselula
                sidebar.classList.remove('open');
            }

            // Layisha ingxoxo nge-ID
            function loadChat(chatId) {
                currentChatId = chatId;
                const chat = chats.find(c => c.id === chatId);
                
                if (chat) {
                    chatTitle.textContent = chat.title;
                    renderMessages(chat.messages);
                    
                    // Skrolela ezansi kwemilayezo
                    setTimeout(() => {
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 0);
                }
            }

            // Bonisa umlando wengxoxo ku-sidebar
            function renderChatHistory() {
                chatHistory.innerHTML = '';
                
                chats.forEach(chat => {
                    const chatItem = document.createElement('div');
                    chatItem.className = 'chat-item';
                    if (chat.id === currentChatId) {
                        chatItem.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
                    }
                    chatItem.textContent = chat.title;
                    chatItem.addEventListener('click', () => {
                        loadChat(chat.id);
                        // Vala i-sidebar kuselula
                        sidebar.classList.remove('open');
                    });
                    
                    chatHistory.appendChild(chatItem);
                });
            }

            // Bonisa imilayezo endaweni yengxoxo
            function renderMessages(messages) {
                chatMessages.innerHTML = '';
                
                messages.forEach(message => {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `message ${message.role}-message`;
                    
                    const messageContent = document.createElement('div');
                    messageContent.className = 'message-content';
                    
                    const avatar = document.createElement('div');
                    avatar.className = 'message-avatar';
                    avatar.innerHTML = message.role === 'user' ? 
                        '<i class="fas fa-user"></i>' : 
                        '<i class="fas fa-robot"></i>';
                    
                    const text = document.createElement('div');
                    text.className = 'message-text';
                    text.innerHTML = message.content.replace(/\n/g, '<br>');
                    
                    messageContent.appendChild(avatar);
                    messageContent.appendChild(text);
                    messageDiv.appendChild(messageContent);
                    chatMessages.appendChild(messageDiv);
                });
                
                // Skrolela ezansi
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Thumela umlayezo
            function sendMessage() {
                const messageText = chatInput.value.trim();
                if (!messageText) return;
                
                // Faka umlayezo womsebenzisi engxoxweni
                const userMessage = {
                    role: 'user',
                    content: messageText,
                    timestamp: new Date().toISOString()
                };
                
                const chat = chats.find(c => c.id === currentChatId);
                if (chat) {
                    chat.messages.push(userMessage);
                    
                    // Buyekeza isihloko sengxoxo uma kungumlayezo wokuqala
                    if (chat.messages.length === 1) {
                        chat.title = messageText.slice(0, 30) + (messageText.length > 30 ? '...' : '');
                        chatTitle.textContent = chat.title;
                    }
                    
                    saveChats();
                    renderMessages(chat.messages);
                    renderChatHistory();
                }
                
                // Susa okufakiwe
                chatInput.value = '';
                chatInput.style.height = 'auto';
                sendBtn.disabled = true;
                
                // Bonisa inkomba yokuthayipha
                showTypingIndicator();
                isWaitingForResponse = true;
                
                // Lingisa impendulo ye-AI ngemva kokulibala
                setTimeout(() => {
                    generateAIResponse(messageText);
                }, 1000);
            }

            // Bonisa inkomba yokuthayipha
            function showTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'message ai-message';
                
                const messageContent = document.createElement('div');
                messageContent.className = 'message-content';
                
                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.innerHTML = '<i class="fas fa-robot"></i>';
                
                const typingIndicator = document.createElement('div');
                typingIndicator.className = 'typing-indicator';
                for (let i = 0; i < 3; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'typing-dot';
                    typingIndicator.appendChild(dot);
                }
                
                messageContent.appendChild(avatar);
                messageContent.appendChild(typingIndicator);
                typingDiv.appendChild(messageContent);
                chatMessages.appendChild(typingDiv);
                
                // Skrolela ezansi
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                return typingDiv;
            }

            // Khiqiza impendulo ye-AI
            function generateAIResponse(userMessage) {
                // Susa inkomba yokuthayipha
                chatMessages.removeChild(chatMessages.lastChild);
                
                // Lapho ngokuvamile ubizanga i-API ye-AI
                // Kule demo, sizolingisa izimpendulo
                const responses = [
                    "Ngingumsizi we-AI. Ngingakusiza ngani namuhla?",
                    "Lowo mbuza othakazelisa. Ake ngicabange ngalokho...",
                    "Nginganikeza ulwazi ngezihloko eziningi. Uthini okunye ongathanda ukwazi?",
                    "Ngiyabonga ngomlayezo wakho! Ngilapha ukukusiza nganoma yimiphi imibuzo onayo.",
                    "Ngiyaqonda umbuzo wakhu. Nakhu engingakutshela ngalo mqondo."
                ];
                
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                // Faka umlayezo we-AI engxoxweni
                const aiMessage = {
                    role: 'ai',
                    content: randomResponse,
                    timestamp: new Date().toISOString()
                };
                
                const chat = chats.find(c => c.id === currentChatId);
                if (chat) {
                    chat.messages.push(aiMessage);
                    saveChats();
                    renderMessages(chat.messages);
                }
                
                isWaitingForResponse = false;
            }

            // Gcina izingxoxo ku-localStorage
            function saveChats() {
                localStorage.setItem('chats', JSON.stringify(chats));
            }

            // Qalisa uhlelo
            init();
        });
    </script>
</body>
</html>